"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{94149:function(L,d,e){e.d(d,{Z:function(){return T}});var r=e(87462),P=e(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},o=M,E=e(84089),j=function(c,b){return P.createElement(E.Z,(0,r.Z)({},c,{ref:b,icon:o}))},T=P.forwardRef(j)},5966:function(L,d,e){var r=e(1413),P=e(91),M=e(67294),o=e(87302),E=e(85893),j=["fieldProps","proFieldProps"],T=["fieldProps","proFieldProps"],S="text",c=function(t){var I=t.fieldProps,W=t.proFieldProps,a=(0,P.Z)(t,j);return(0,E.jsx)(o.Z,(0,r.Z)({valueType:S,fieldProps:I,filedConfig:{valueType:S},proFieldProps:W},a))},b=function(t){var I=t.fieldProps,W=t.proFieldProps,a=(0,P.Z)(t,T);return(0,E.jsx)(o.Z,(0,r.Z)({valueType:"password",fieldProps:I,proFieldProps:W,filedConfig:{valueType:S}},a))},O=c;O.Password=b,O.displayName="ProFormComponent",d.Z=O},68262:function(L,d,e){e.d(d,{U:function(){return W}});var r=e(1413),P=e(91),M=e(89451),o=e(76519),E=e(94184),j=e.n(E),T=e(67294),S=e(97269),c=e(4942),b=e(98082),O=function(m){var l;return l={},(0,c.Z)(l,m.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:m.colorTextSecondary,fontSize:m.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),(0,c.Z)(l,"@media (min-width: @screen-md-min)",(0,c.Z)({},"".concat(m.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"})),l};function k(a){return(0,b.Xj)("LoginForm",function(m){var l=(0,r.Z)((0,r.Z)({},m),{},{componentCls:".".concat(a)});return[O(l)]})}var t=e(85893),I=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function W(a){var m,l=a.logo,F=a.message,X=a.contentStyle,U=a.title,Q=a.subTitle,V=a.actions,H=a.children,n=a.containerStyle,$=a.otherStyle,f=(0,P.Z)(a,I),J=(0,M.YB)(),q=f.submitter===!1?!1:(0,r.Z)((0,r.Z)({searchConfig:{submitText:J.getMessage("loginForm.submitText","\u767B\u5F55")}},f.submitter),{},{submitButtonProps:(0,r.Z)({size:"large",style:{width:"100%"}},(m=f.submitter)===null||m===void 0?void 0:m.submitButtonProps),render:function(g,v){var s,A=v.pop();if(typeof(f==null||(s=f.submitter)===null||s===void 0?void 0:s.render)=="function"){var y,x;return f==null||(y=f.submitter)===null||y===void 0||(x=y.render)===null||x===void 0?void 0:x.call(y,g,v)}return A}}),G=(0,T.useContext)(o.ZP.ConfigContext),Y=G.getPrefixCls("pro-form-login"),D=k(Y),_=D.wrapSSR,z=D.hashId,Z=function(g){return"".concat(Y,"-").concat(g," ").concat(z)},w=(0,T.useMemo)(function(){return l?typeof l=="string"?(0,t.jsx)("img",{src:l}):l:null},[l]);return _((0,t.jsxs)("div",{className:j()(Z("container"),z),style:n,children:[(0,t.jsxs)("div",{className:"".concat(Z("top")," ").concat(z).trim(),children:[U||w?(0,t.jsxs)("div",{className:"".concat(Z("header")),children:[w?(0,t.jsx)("span",{className:Z("logo"),children:w}):null,U?(0,t.jsx)("span",{className:Z("title"),children:U}):null]}):null,Q?(0,t.jsx)("div",{className:Z("desc"),children:Q}):null]}),(0,t.jsxs)("div",{className:Z("main"),style:(0,r.Z)({width:328},X),children:[(0,t.jsxs)(S.A,(0,r.Z)((0,r.Z)({isKeyPressSubmit:!0},f),{},{submitter:q,children:[F,H]})),V?(0,t.jsx)("div",{className:Z("main-other"),style:$,children:V}):null]})]}))}},80801:function(L,d,e){e.r(d),e.d(d,{default:function(){return w}});var r=e(42122),P=e.n(r),M=e(17061),o=e.n(M),E=e(17156),j=e.n(E),T=e(27424),S=e.n(T),c=e(67294),b=e(12461),O=e(71577),k=e(79722),t={container:"container___REQAy",lang:"lang___DAjLY",content:"content___IkUx1",icon:"icon___fqAhh"},I=e(53101),W=e(87547),a=e(94149),m=e(68262),l=e(5966),F=e(1413),X=e(91),U=e(22270),Q=e(32808),V=e(90789),H=e(87302),n=e(85893),$=["options","fieldProps","proFieldProps","valueEnum"],f=c.forwardRef(function(p,g){var v=p.options,s=p.fieldProps,A=p.proFieldProps,y=p.valueEnum,x=(0,X.Z)(p,$);return(0,n.jsx)(H.Z,(0,F.Z)({ref:g,valueType:"checkbox",valueEnum:(0,U.h)(y,void 0),fieldProps:(0,F.Z)({options:v},s),lightProps:(0,F.Z)({labelFormatter:function(){return(0,n.jsx)(H.Z,(0,F.Z)({ref:g,valueType:"checkbox",mode:"read",valueEnum:(0,U.h)(y,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({options:v},s),proFieldProps:A},x))}},x.lightProps),proFieldProps:A},x))}),J=c.forwardRef(function(p,g){var v=p.fieldProps,s=p.children;return(0,n.jsx)(Q.Z,(0,F.Z)((0,F.Z)({ref:g},v),{},{children:s}))}),q=(0,V.G)(J,{valuePropName:"checked"}),G=q;G.Group=f;var Y=G,D=e(57405),_=e(26442),z=function(){var g=(0,c.useState)(void 0),v=S()(g,2),s=v[0],A=v[1],y=(0,c.useState)(!0),x=S()(y,2),K=x[0],ee=x[1],N=function(){var C=j()(o()().mark(function B(){var h;return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,k.oz)();case 3:h=u.sent,console.log("Response:",h),A(h.data),ee(!1),u.next=13;break;case 9:u.prev=9,u.t0=u.catch(0),console.error("Error fetching QR code:",u.t0),b.ZP.error("\u64CD\u4F5C\u5931\u8D25");case 13:case"end":return u.stop()}},B,null,[[0,9]])}));return function(){return C.apply(this,arguments)}}();return(0,n.jsxs)("div",{style:{textAlign:"center"},children:[K&&(0,n.jsxs)("div",{children:[(0,n.jsx)(O.Z,{type:"link",onClick:N,children:"\u83B7\u53D6\u767B\u5F55\u4E8C\u7EF4\u7801"}),(0,n.jsx)("br",{})]}),K?null:(0,n.jsx)("img",{src:s,alt:"QR Code",style:{maxWidth:"100%",maxHeight:"30vh",margin:"0 auto"}})]})},Z=function(){var g=(0,c.useState)("account"),v=S()(g,2),s=v[0],A=v[1],y=(0,D.useModel)("@@initialState"),x=y.setInitialState,K=function(){var N=j()(o()().mark(function C(){return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:D.history.push("/user/login/wechat");case 1:case"end":return h.stop()}},C)}));return function(){return N.apply(this,arguments)}}(),ee=function(){var N=j()(o()().mark(function C(B){var h,R,u;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,s!=="wechat"){i.next=4;break}return K(),i.abrupt("return");case 4:return i.next=6,(0,D.request)("/api/user/login",{method:"POST",data:P()({},B)});case 6:if(h=i.sent,!(h.code===0&&h.data)){i.next=12;break}return R=new URL(window.location.href).searchParams,D.history.push(R.get("redirect")||"/"),x({loginUser:h.data}),i.abrupt("return");case 12:i.next=19;break;case 14:i.prev=14,i.t0=i.catch(0),u="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",console.log(i.t0),b.ZP.error(u);case 19:case"end":return i.stop()}},C,null,[[0,14]])}));return function(B){return N.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:t.container,children:[(0,n.jsx)("title",{children:"KQ \u63A5\u53E3"}),(0,n.jsx)("div",{className:t.content,children:(0,n.jsxs)(m.U,{logo:(0,n.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"KQ\u63A5\u53E3",subTitle:"API \u5F00\u653E\u5E73\u53F0",initialValues:{autoLogin:!0},onFinish:function(){var N=j()(o()().mark(function C(B){return o()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,ee(B);case 2:case"end":return R.stop()}},C)}));return function(C){return N.apply(this,arguments)}}(),children:[(0,n.jsx)(I.Z,{activeKey:s,onChange:A,centered:!0,items:[{key:"account",label:"\u7528\u6237\u767B\u5F55"},{key:"wechat",label:"\u5FAE\u4FE1\u767B\u5F55"}]}),s==="account"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{name:"userAccount",fieldProps:{size:"large",prefix:(0,n.jsx)(W.Z,{className:t.prefixIcon})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u7528\u6237\u540D\u662F\u5FC5\u586B\u9879\uFF01"}]}),(0,n.jsx)(l.Z.Password,{name:"userPassword",fieldProps:{size:"large",prefix:(0,n.jsx)(a.Z,{className:t.prefixIcon})},placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879\uFF01"}]})]}),s==="wechat"&&(0,n.jsx)(z,{}),s!=="wechat"&&(0,n.jsx)("div",{style:{marginBottom:24},children:(0,n.jsx)(Y,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"})})]})}),(0,n.jsx)(_.Z,{})]})},w=Z},67226:function(){},75800:function(L,d,e){var r=e(67226)},17997:function(L,d,e){var r=e(67226),P=e(75800),M=e(42840),o=e(47873)},42840:function(L,d,e){var r=e(67226),P=e(13817)},47873:function(L,d,e){var r=e(67226)},13817:function(L,d,e){var r=e(67226)}}]);
